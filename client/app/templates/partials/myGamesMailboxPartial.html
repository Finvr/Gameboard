<section class="inbox">
  <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
    <li class="collection-header"><span class="grey-text"><h5>Inbox</h5></span></li>
    <li ng-repeat="game in myGames" class="collection-item avatar" ng-if="game.pending_requests > 0">
      <div class="collapsible-header">
        <span class="title grey-text text-darkern-2">
          {{ game.game | limitTo: 10 }} ... 
        </span>
        <span>
            {{ game.game_datetime | date : "M/d/yyyy @ h:mm a" }}
        </span>           
        <a href="#approve-pending" ng-click="getGamepostRequest(game)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a>
      </div>
      <div class="collapsible-body">
        <p>
          <strong>Time:</strong> {{ game.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
          <strong>Location:</strong> {{ game.game_location }}<br>
          <strong>Players:</strong> {{game.accepted_players + "/" + game.player_count}}
          <br>
          <strong>Description:</strong> {{game.gamepost_description ? game.gamepost_description : "N/A"}}<br>
        </p>
      </div>
    </li>


    <!-- begin review list -->
    <li ng-repeat="gameToReview in recentGames track by $index | orderBy:'-game_datetime'" class="collection-item avatar" ng-if="!gameToReview.reviewed">
       <div class="collapsible-header">
        <span class="title grey-text text-darkern-2">
          {{ gameToReview.game | limitTo: 10 }} ... 
        </span>
        <span>
            {{ gameToReview.game_datetime | date : "M/d/yyyy @ h:mm a" }}
        </span> 
        <a href="#openRateModal" ng-click="openRateModal(gameToReview)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a> 
       </div>
       <div class="collapsible-body"><p>
          <strong>Time:</strong> {{ gameToReview.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
          <strong>Location:</strong> {{ gameToReview.game_location }}<br>
          <strong>Players:</strong> {{gameToReview.accepted_players + "/" + gameToReview.player_count}}
          <br>
          <strong>Description:</strong> {{gameToReview.gamepost_description ? gameToReview.gamepost_description : "N/A"}}<br>
        </p></div>
      </li>
      <!-- end review list -->



    <li ng-repeat="invitation in myInvitations track by $index | orderBy:'game_datetime'" class="collection-item avatar"> 
      <div class="collapsible-header">
          <span class="title grey-text text-darkern-2">
            {{ invitation.game | limitTo: 10 }} ... 
          </span>
          <span>
              {{ invitation.game_datetime | date : "M/d/yyyy @ h:mm a" }}
          </span>
        <a href="#approve-invitation" ng-click="setInvitationToReview(invitation)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a>
      </div>
      <div class="collapsible-body">
        <p>
          <strong>Time:</strong> {{ invitation.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
          <strong>Location:</strong> {{ invitation.game_location }}<br>
          <strong>Players:</strong> {{invitation.player_count}}
          <br>
          <strong>Description:</strong> {{invitation.gamepost_description ? invitation.gamepost_description : "N/A"}}<br>
        </p>
      </div>
    </li>
  </ul>
</section>
<section class="outbox">
  <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
    <li class="collection-header"><span class="grey-text"><h5>Outbox</h5></span></li>
    <li ng-repeat="request in myRequests track by $index | orderBy:'game_datetime'" class="collection-item avatar" ng-if="request.status==='pending' || request.status==='denied' "> 
      <div class="collapsible-header">
          <span class="title grey-text text-darkern-2">
            {{ request.game | limitTo: 10 }} ... 
          </span>
          <span>
              {{ request.game_datetime | date : "M/d/yyyy @ h:mm a" }}
          </span>
          <a href="#cancelRequestModal" ng-click="setRequestToCancel(request)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">cancel</i></a>
        </div>
        <div class="collapsible-body">
          <p>
            <strong>Time:</strong> {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
            <strong>Location:</strong> {{ game.game_location }}<br>
            <strong>Players:</strong> {{request.player_count}}
            <br>
            <strong>Description:</strong> {{request.gamepost_description ? request.gamepost_description : "N/A"}}<br>
          </p>
        </div>
      </li>
  </ul>
</section>