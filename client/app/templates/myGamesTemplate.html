<div class="myGames">
  <div ng-show="myGames.length === 0 && myRequests.length === 0" class="fallback-view container ng-cloak" ng-cloak>
    <h2 class="pink-text text-darken-2 center aligned">Welcome!</h2>
    <p>You currently haven't requested to join any game events or posted any new game events you want to host.</p>
    <p>  Go <a class="teal-text" href="/#/browse-games">browse</a> game events happening in your area  or <a class="teal-text" href="/#/create-game">post a new game event</a> you want to host.</p>
  </div>
  <div ng-show="myGames.length > 0 || (myRequests.length > 0 && myRequests[0] !== 'r')" class="row normal-view">
   <div class="col m4">
      <center class="profile-box">
        <div class="img-wrapper">
         <img  class="responsive-img" src="{{ myProfile.picture }}">
        </div>
        <div class="name">
          <p class="indigo-text" watch>{{ myProfile.name }}</p>
        </div>
      </center>
      <section class="inbox">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="pink-text text-darken-2"><h5>Inbox</h5></span></li>
          <li ng-repeat="game in myGames" class="collection-item avatar" ng-if="game.pending_requests > 0">
            <div class="collapsible-header">
              <span class="title indigo-text text-darkern-2">
                {{ game.game | limitTo: 10 }} ... 
              </span>
              <span>
                  {{ game.game_datetime | date : "M/d/yyyy @ h:mm a" }}
              </span>
              <a href="#cancelGamepostModal" ng-click="setGameToCancel(game)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">cancel</i></a>
              <a href="#approvePending" ng-click="getGamepostRequest(game)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a>
            </div>
            <div class="collapsible-body">
              <p>
                <strong>Time:</strong> {{ game.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ game.game_location }}<br>
                <span>Players:</span> {{game.player_count}}
                <br>
                <span>Description:</span> {{game.gamepost_description}}<br>
              </p>
            </div>
        </ul>
      </section>
      <section class="outbox">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="pink-text text-darken-2"><h5>Outbox</h5></span></li>
          <li ng-repeat="request in myRequests track by $index | orderBy:'game_datetime'" class="collection-item avatar" ng-if="request.status==='pending' || request.status==='denied' "> 
            <div class="collapsible-header">
                <span class="title indigo-text text-darkern-2">
                  {{ request.game | limitTo: 10 }} ... 
                </span>
                <span>
                    {{ request.game_datetime | date : "M/d/yyyy @ h:mm a" }}
                </span>
                <a href="#cancelRequestModal" ng-click="setRequestToCancel(request)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">cancel</i></a>
              </div>
              <div class="collapsible-body">
                <p>
                  <strong>Time:</strong> {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                  <strong>Location:</strong> {{ game.game_location }}<br>
                  <span>Players:</span> {{request.player_count}}
                  <br>
                  <span>Description:</span> {{request.gamepost_description}}<br>
                </p>
              </div>
            </li>
        </ul>
      </section>
    </div>
    <div ui-calendar="uiConfig.calendar" class="col m8" ng-model="eventSources" watch>
    </div>
  </div>
<!-- Pop-up modal for requests of gameposts -->
  <div id="approvePending" class="modal approve-pending">
    <div class="modal-header">
      <div ng-click="close()"><i class="material-icons right close">close</i></div>
      <h4 class="white-text">{{gameToApprove.game}}</h4>
    </div>
    <div class="modal-content container"> 
      <ul class="collection">
        <li class="row content-header">
          <div class="title col s8 indigo-text">Request</div>
          <div class="title col s2 indigo-text center">Accept</div>
          <div class="title col s2 indigo-text center">Decline</div>
        </li>
        <li ng-repeat="request in requests | orderBy:'game_datetime'" class="collection-item row" ng-if="request.status==='pending'">
          <div class="col s8">
            <div class="sub-list">
              <strong class="content-lead">From: </strong>
              <div>{{ request.username }}</div>
            </div>     
            <div class="sub-list">
              <strong class="content-lead">Message:</strong>
              <div> {{ request.comments }}</div>
            </div>
          </div>
          <button class="col s2 btn-flat btn-medium waves-effect waves-light teal lighten-1 white-text" ng-click="requestConfirm('accepted', request)">
            <i class="material-icons">check</i>
          </button>
          <button class="col s2 btn-flat waves-effect waves-light pink white-text" ng-click="requestConfirm('declined', request)">
            <i class="material-icons">close</i>
          </button>
        </li> 
      </ul>
    </div>
  </div>
</div>