<div class="myGames">
  <div ng-show="myGames.length === 0 && myRequests.length === 0" class="fallback-view container ng-cloak" ng-cloak>
    <h2 class="grey-text center aligned">Welcome!</h2>
    <p>You currently haven't requested to join any game events or posted any new game events you want to host.</p>
    <p>  Go <a class="grey darken-3-text" href="/#/browse-games">browse</a> game events happening in your area  or <a class="grey darken-3-text" href="/#/create-game">post a new game event</a> you want to host.</p>
  </div>
  <div ng-show="myGames.length > 0 || myInvitations.length > 0 || (myRequests.length > 0 && myRequests[0] !== 'r')" class="row normal-view">
    <div class="col profile m4">
      <center class="profile-box">
        <div class="img-wrapper">
         <img  class="responsive-img" ng-src="{{ myProfile.picture }}">
        </div>
        <div class="name">
          <p class="grey-text" watch>{{ myProfile.username }}</p>
        </div>
      </center>
      <section class="inbox">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="grey-text"><h5>Inbox</h5></span></li>
          <li ng-repeat="game in myGames" class="collection-item avatar" ng-if="game.pending_requests > 0">
            <div class="collapsible-header">
              <span class="title grey-text text-darkern-2">
                {{ game.game | limitTo: 10 }} ... 
              </span>
              <span>
                  {{ game.game_datetime | date : "M/d/yyyy @ h:mm a" }}
              </span>           
              <a href="#approve-pending" ng-click="getGamepostRequest(game)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a>
            </div>
            <div class="collapsible-body">
              <p>
                <strong>Time:</strong> {{ game.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ game.game_location }}<br>
                <strong>Players:</strong> {{game.accepted_players + "/" + game.player_count}}
                <br>
                <strong>Description:</strong> {{game.gamepost_description ? game.gamepost_description : "N/A"}}<br>
              </p>
            </div>
          </li>


          <!-- begin review list -->
          <li ng-repeat="gameToReview in recentGames track by $index | orderBy:'-game_datetime'" class="collection-item avatar" ng-if="!gameToReview.reviewed">
             <div class="collapsible-header">
              <span class="title grey-text text-darkern-2">
                {{ gameToReview.game | limitTo: 10 }} ... 
              </span>
              <span>
                  {{ gameToReview.game_datetime | date : "M/d/yyyy @ h:mm a" }}
              </span> 
              <a href="#openRateModal" ng-click="openRateModal(gameToReview)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a> 
             </div>
             <div class="collapsible-body"><p>
                <strong>Time:</strong> {{ gameToReview.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ gameToReview.game_location }}<br>
                <strong>Players:</strong> {{gameToReview.accepted_players + "/" + gameToReview.player_count}}
                <br>
                <strong>Description:</strong> {{gameToReview.gamepost_description ? gameToReview.gamepost_description : "N/A"}}<br>
              </p></div>
            </li>
            <!-- end review list -->



          <li ng-repeat="invitation in myInvitations track by $index | orderBy:'game_datetime'" class="collection-item avatar"> 
            <div class="collapsible-header">
                <span class="title grey-text text-darkern-2">
                  {{ invitation.game | limitTo: 10 }} ... 
                </span>
                <span>
                    {{ invitation.game_datetime | date : "M/d/yyyy @ h:mm a" }}
                </span>
              <a href="#approve-invitation" ng-click="setInvitationToReview(invitation)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">open_in_new</i></a>
            </div>
            <div class="collapsible-body">
              <p>
                <strong>Time:</strong> {{ invitation.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ invitation.game_location }}<br>
                <strong>Players:</strong> {{invitation.player_count}}
                <br>
                <strong>Description:</strong> {{invitation.gamepost_description ? invitation.gamepost_description : "N/A"}}<br>
              </p>
            </div>
          </li>
        </ul>
      </section>
      <section class="outbox">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="grey-text"><h5>Outbox</h5></span></li>
          <li ng-repeat="request in myRequests track by $index | orderBy:'game_datetime'" class="collection-item avatar" ng-if="request.status==='pending' || request.status==='denied' "> 
            <div class="collapsible-header">
                <span class="title grey-text text-darkern-2">
                  {{ request.game | limitTo: 10 }} ... 
                </span>
                <span>
                    {{ request.game_datetime | date : "M/d/yyyy @ h:mm a" }}
                </span>
                <a href="#cancelRequestModal" ng-click="setRequestToCancel(request)" class="waves-effect waves-light secondary-content" modal><i class="material-icons">cancel</i></a>
              </div>
              <div class="collapsible-body">
                <p>
                  <strong>Time:</strong> {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                  <strong>Location:</strong> {{ game.game_location }}<br>
                  <strong>Players:</strong> {{request.player_count}}
                  <br>
                  <strong>Description:</strong> {{request.gamepost_description ? request.gamepost_description : "N/A"}}<br>
                </p>
              </div>
            </li>
        </ul>
      </section>
    </div>

    <!-- button for agenda view -->
    <button type="button" id="agenda" class="btn">Agenda View</button>

    <!-- calendar div -->
    <div ui-calendar="uiConfig.calendar" class="col m8" ng-model="eventSources" id="calendar" watch>    
    </div>

    <!-- game List -->
    <div id="agendaList" class="col m8">

      <div class="collection col m5 offset-m1" data-collapsible="accordion" watch>
        <div class="title darkgray-text text-darken-2 collection-item"><h5>Games I'm Hosting</h5></div>
        <div ng-repeat="game in myGames | orderBy: 'game_datetime'" class="collection-item row">
            <p class="agendaListGameName col m8" ng-click="showHostedEventModal({data:game})">
              <span class="title indigo-text text-darkern-2">
                {{game.game}}
              </span> @ {{ game.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}
            </p>
            <a href="#cancel-modal" ng-click="setGameToCancel(game)" class="waves-effect waves-light secondary-content right col m1.5" modal><i class="material-icons">cancel</i></a>
            <a href="#approve-pending" ng-click="getGamepostRequest(game)" class="waves-effect waves-light secondary-content right col m1.5" modal><i class="material-icons" ng-if="game.pending_requests > 0">add_alert</i></a>
        </div>
      </div>
      <div class="collection col m5 offset-m1" data-collapsible="accordion" watch>
        <div class="title darkgray-text text-darken-2 collection-item"><h5>Games I'm Joining</h5></div>
        <div ng-repeat="request in myRequests | orderBy: 'game_datetime'" ng-if="request.status === 'accepted'" class="collection-item row">
          <p class="agendaListGameName col m8" ng-click="showHostedEventModal({data:request})">
            <span class="title indigo-text text-darkern-2">
              {{request.game}}
            </span> @ {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}
          </p>
          <a href="#cancelRequestModal" ng-click="setRequestToCancel(request)" class="waves-effect waves-light secondary-content right col m1.5" modal><i class="material-icons">cancel</i></a>
        </div>
      </div>
    </div>
  </div>

  <!-- Pop-up modal for gameposts accept/decline join requests -->
  <div class="ng-include: 'app/templates/modals/gamepostModal.html'">
  </div>

  <!-- Pop-up modal for rating each game -->
  <div class="ng-include: 'app/templates/modals/gameReviewModal.html'">
  </div>

  <!-- Pop-up modal for requests of invitations -->
  <div class="ng-include: 'app/templates/modals/gameInvitationModal.html'">
  </div>

  <!-- Pop-up for game details -->
  <div class="ng-include: 'app/templates/modals/gameDetailsModal.html'">
  </div>

  <!-- Pop-up modal for cancelling of gameposts -->
  <div class="ng-include: 'app/templates/modals/gamepostCancelModal.html'">
  </div>

  <!-- Pop-up modal for cancelling of requests -->
  <div class="ng-include: 'app/templates/modals/requestCancelModal.html'">
  </div>

</div>





  
  

