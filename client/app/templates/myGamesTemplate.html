<div class="myGames">
  <div class="row">
    <div class="col m4">
      <section>
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header">
            <span class="pink-text text-darken-2"><h5>Game's I'm Hosting</h5></span>
          </li>
          <li ng-repeat="game in myGames" class="collection-item avatar">
            <div class="collapsible-header">
              <i class="material-icons md-light">info</i>
              <span class="title indigo-text text-darkern-2">
                {{ game.game}}
              </span>
              <!-- add ng-if to only show this if there are requests to approve -->
              <a href="#modal1" ng-click="getGamepostRequest(game)" class="waves-effect waves-light secondary-content" modal><i class="material-icons" ng-if="game.has_pending_requests">add_alert</i></a>
              <p>
                <strong>Time:</strong> {{ game.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ game.game_location }}
              </p>
            </div>
            <div class="collapsible-body">
              <p>
                <span>Players:</span> {{game.player_count}}
                <br>
                <span>Description:</span> {{game.gamepost_description}}<br>
              </p>
            </div>
          </li>
        </ul>
      </section>
    </div>
    <div class="col m4">
      <section class="joined">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="pink-text text-darken-2"><h5>Game's I'm Joining</h5></span></li>
          <!-- must be changed to only request that are pending-->
          <li ng-repeat="request in myRequests" class="collection-item avatar" ng-if="request.status!=='pending'">
            <div class="collapsible-header">
              <i class="material-icons md-light">info</i>
              <span class="title indigo-text text-darkern-2">
                {{ request.game}}
              </span>
              <p>
                <strong>Time:</strong> {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ request.game_location }}
              </p>
            </div>
            <div class="collapsible-body">
              <p>
                <span class="pink-text text-darken-2">Comments: </span> {{ request.comments }}
              </p>
            </div>
          </li>
        </ul>
      </section>
    </div>
    <div class="col m4">
      <section class="joined">
        <ul class="collapsible popout with-header" data-collapsible="accordion" watch>
          <li class="collection-header"><span class="pink-text text-darken-2"><h5>My Pending Requests</h5></span></li>
          <!-- must be changed to only request that are pending-->
          <li ng-repeat="request in myRequests" class="collection-item avatar" ng-if="request.status==='pending'">
            <div class="collapsible-header">
              <i class="material-icons md-light">info</i>
              <span class="title indigo-text text-darkern-2">
                {{ request.game}}
              </span>
              <p>
                <strong>Time:</strong> {{ request.game_datetime | date : "EEE, MMM d, y @ h:mm a" }}<br>
                <strong>Location:</strong> {{ request.game_location }}
              </p>
            </div>
            <div class="collapsible-body">
              <p>
                <span class="pink-text text-darken-2">Message sent: </span> {{ request.comments }}
              </p>
            </div>
          </li>
        </ul>
      </section>
    </div>
  </div>
  <!-- Pop-up modal for requests of gameposts -->
  <div id="modal1" class="modal approve-pending">
    <div class="modal-header">
      <h4 class="white-text">Pending Request</h4>
    </div>
    <div class="modal-content container"> 
      <!-- requests list of the gamepost -->
      <ul class="collection">
        <li ng-repeat="request in requests" class="collection-item avatar row">
          <i class="material-icons left col s1">email</i>
          <div class="col s10">
            <span class="gamepostrequest col s12"><strong>Request from {{request.user_id}}</strong></span>
            <span class="col s6"><strong>Status:</strong> {{request.status}}</span><br>
            <span class="col s6"><strong># of Players:</strong> {{request.player_count}}</span><br>
            <span class="col s6"><strong>Message:</strong>  {{ request.comments }}</span>
          </div>
          <p class="center row">
            <button class="col s6 waves-effect waves-light btn-flat btn-medium waves-effect waves-light green white-text" ng-click="requestConfirm(accept)">Accept<i class="material-icons right tiny">done</i></button>
            <button class="col s6 waves-effect waves-light btn-flat waves-effect waves-light red white-text" ng-click="requestConfirm(decline)">Decline<i class="material-icons right tiny">not_interested</i></button>
          </p>
        </li> 
      </ul>
    </div>

    <div class="modal-footer">
      <a class="modal-action modal-close waves-effect teal white-text btn-flat">I'm Game!</a>
    </div>
  </div>
</div>