<div id="openRequest" class="modal">
  <div class="modal-header">
    <div ng-click="close()"><i class="material-icons right close">cancel</i></div>
    <h4 class="white-text">{{game.game}}</h4>
  </div>
  <div class="modal-content row">
    <table class="game-details table">
      <thead>
        <tr>
          <th>Host</th>
          <th>Date</th>
          <th>Time</th>
          <th>Location</th>
          <th>Player Count</th>
          <th>Info</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <a href="#/profile/{{game.host_id}}" target="_blank">{{game.username }}
            </a>
          </td>
          <td>{{ game.game_datetime | date : "M/d/yyyy" }}</td>
          <td>{{ game.game_datetime | date : "h:mm a" }}</td>
          <td>{{ game.game_location }} </td>
          <td>{{ game.accepted_players + "/" + game.player_count }}</td>
          <td>{{ game.gamepost_description ? game.gamepost_description : "N/A" }}</td>
        </tr>
      </tbody>
    </table>
    <div>
      <div>
        <span class="darkgrey-text">Players:</span> {{game.accepted_players}}/{{game.player_count}}
      </div>
      <div ng-if="loggedIn">
        <a href="#/profile/{{game.host_id}}" target="_blank">
          <img ng-src="{{game.picture || game.host_pic}}">{{game.username}}
        </a>
      </div>
      <div ng-if="loggedIn">
        <a ng-repeat="requester in game.playersPictures" href="#/profile/{{requester.user_id}}" target="_blank" ><img ng-src="{{requester.picture}}">{{requester.username}}<br></a>
      </div>
    </div>
    <div>
      <div class="input-field">
        <textarea ng-if="!requestSent(game.id)" ng-model="requestMessage.comments" placeholder="Enter optional message for host"></textarea>
        <div ng-if="requestSent(game.id)" class="sentFallback">
          <div>Your request is: {{reqStatus}} </div>
          <div ng-if= 'reqComments != ""'>Sent message to host: {{reqComments}}</div>
        </div>
        <div ng-if="submitError" class="error col s12 darkgrey-text">{{submitError}}</div>
        </div>
      </div>
    </div>
    <div class="modal-footer" ng-if="!requestSent(game.id) && loggedIn">
      <div ng-click="sendRequest(game)">
        <a class="btn-flat btn-med waves-effect waves-light accept">
          <i class="material-icons">send</i>
        </a>
      </div>
    </div>
  </div>
</div>

